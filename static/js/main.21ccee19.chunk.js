(this["webpackJsonpkim0xsugar-playground"]=this["webpackJsonpkim0xsugar-playground"]||[]).push([[0],{234:function(e){e.exports=JSON.parse("{}")},235:function(e){e.exports=JSON.parse("{}")},236:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"string[]","name":"collateralTypes","type":"string[]"},{"internalType":"contract IFeed[]","name":"feed","type":"address[]"},{"internalType":"address","name":"usr","type":"address"}],"name":"getAccountInfos","outputs":[{"internalType":"uint256[]","name":"totalLockCollaterals","type":"uint256[]"},{"internalType":"uint256[]","name":"totalLoans","type":"uint256[]"},{"internalType":"uint256[]","name":"oraclePrices","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"collateralType","type":"string"},{"internalType":"contract IFeed","name":"feed","type":"address"}],"name":"getCollateralInfo","outputs":[{"internalType":"uint256","name":"totalLockCollateral","type":"uint256"},{"internalType":"uint256","name":"totalLoan","type":"uint256"},{"internalType":"uint256","name":"oraclePrice","type":"uint256"},{"internalType":"uint256","name":"vaultLength","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string[]","name":"collateralTypes","type":"string[]"},{"internalType":"contract IFeed[]","name":"feeds","type":"address[]"}],"name":"getCollateralInfos","outputs":[{"internalType":"uint256[]","name":"totalLockCollaterals","type":"uint256[]"},{"internalType":"uint256[]","name":"totalLoans","type":"uint256[]"},{"internalType":"uint256[]","name":"oraclePrices","type":"uint256[]"},{"internalType":"uint256[]","name":"vaultLengths","type":"uint256[]"},{"internalType":"uint256[]","name":"rates","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"collateralType","type":"string"},{"internalType":"uint256","name":"si","type":"uint256"},{"internalType":"uint256","name":"ei","type":"uint256"}],"name":"getVaultInfoList","outputs":[{"internalType":"uint256[]","name":"totalLockCollaterals","type":"uint256[]"},{"internalType":"uint256[]","name":"totalLoans","type":"uint256[]"},{"internalType":"uint256[]","name":"indexes","type":"uint256[]"},{"internalType":"address[]","name":"accounts","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ledger","outputs":[{"internalType":"contract ILedger","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')},237:function(e){e.exports=JSON.parse('[{"inputs":[],"name":"getPositionPoolList","outputs":[{"components":[{"internalType":"address","name":"pool","type":"address"},{"internalType":"address","name":"token","type":"address"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"uint8","name":"decimals","type":"uint8"},{"internalType":"uint256","name":"maxLtv","type":"uint256"},{"internalType":"uint256","name":"liqudation","type":"uint256"},{"internalType":"uint256","name":"oraclePrice","type":"uint256"}],"internalType":"struct KlaswapPositionPoolDataProvider.PositionPool[]","name":"positionPools","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"idx","type":"uint256"}],"name":"getPositionPoolList","outputs":[{"components":[{"internalType":"address","name":"pool","type":"address"},{"internalType":"address","name":"token","type":"address"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"uint8","name":"decimals","type":"uint8"},{"internalType":"uint256","name":"maxLtv","type":"uint256"},{"internalType":"uint256","name":"liqudation","type":"uint256"},{"internalType":"uint256","name":"oraclePrice","type":"uint256"}],"internalType":"struct KlaswapPositionPoolDataProvider.PositionPool","name":"positionPools","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"pool","type":"address"},{"internalType":"address[]","name":"addresses","type":"address[]"}],"name":"getUserDataList","outputs":[{"components":[{"internalType":"uint256","name":"collateralInUsd","type":"uint256"},{"internalType":"uint256","name":"borrowedInUsd","type":"uint256"},{"internalType":"uint256","name":"swappedInUsd","type":"uint256"},{"internalType":"int256","name":"positionAmount","type":"int256"},{"internalType":"int256","name":"pnl","type":"int256"},{"internalType":"int256","name":"roe","type":"int256"},{"internalType":"uint256","name":"entryPrice","type":"uint256"},{"internalType":"uint256","name":"liquidationPrice","type":"uint256"},{"internalType":"uint256","name":"position","type":"uint256"},{"internalType":"uint256","name":"collateralAmount","type":"uint256"},{"internalType":"address","name":"borrowedToken","type":"address"},{"internalType":"uint256","name":"reward","type":"uint256"},{"internalType":"uint256","name":"ltv","type":"uint256"}],"internalType":"struct KlaswapPositionPoolDataProvider.UserPosition[]","name":"userPositions","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"poolViewer","outputs":[{"internalType":"contract IPositionPoolViewer","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')},238:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"name":"user","type":"address"},{"indexed":false,"name":"userContract","type":"address"}],"name":"CreateUser","type":"event"}]')},404:function(e,t,a){},406:function(e,t,a){var n={"./caver-abi/src/index.js":113,"./caver-account/src/index.js":65,"./caver-contract/src/index.js":77,"./caver-core-helpers/src/index.js":42,"./caver-core-method/src/index.js":59,"./caver-core-requestmanager/caver-providers-http/src/index.js":306,"./caver-core-requestmanager/caver-providers-ipc/src/index.js":310,"./caver-core-requestmanager/caver-providers-ws/src/index.js":305,"./caver-core-requestmanager/src/index.js":303,"./caver-core-subscriptions/src/index.js":104,"./caver-core/src/index.js":49,"./caver-ipfs/src/index.js":314,"./caver-kct/src/index.js":376,"./caver-klay/caver-klay-accounts/src/index.js":379,"./caver-klay/caver-klay-personal/src/index.js":382,"./caver-klay/src/index.js":383,"./caver-middleware/src/index.js":186,"./caver-net/src/index.js":231,"./caver-rpc/src/index.js":384,"./caver-rtm/src/index.js":110,"./caver-transaction/src/index.js":385,"./caver-utils/iban/src/index.js":298,"./caver-utils/promievent/src/index.js":297,"./caver-utils/src/index.js":10,"./caver-validator/src/index.js":386,"./caver-wallet/src/index.js":208};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=406},408:function(e,t){},418:function(e,t){},420:function(e,t){},430:function(e,t){},432:function(e,t){},457:function(e,t){},458:function(e,t){},463:function(e,t){},465:function(e,t){},472:function(e,t){},491:function(e,t){},589:function(e,t){},595:function(e,t){},607:function(e,t){},608:function(e,t){},869:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(389),c=a.n(s),i=(a(404),a(11)),o=a(81),l=a(92),u=a(2);function d(e){return Object(l.a)(e),Object(u.jsx)("footer",{className:"footer mt-2",children:Object(u.jsxs)("div",{className:"content has-text-centered",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("strong",{children:"Klaytn Defi ?"})," by kim0xsugar \ud83e\udd64."]}),Object(u.jsxs)("div",{className:"block",children:["Feedback & Email :"," ",Object(u.jsx)("a",{href:"mailto:kim0sugar1@gmail.com",children:"kim0sugar1@gmail.com"})," "]})]})})}var p=function(){var e=Object(i.j)(),t=Object(n.useMemo)((function(){var t=e.pathname;return"/kokoa-status"===t?"Collaterals & Loans Status":"impermanent-loss"===t?"Impermanent Loss Calculator":"/"===t?"kim0xsugar":void 0}),[e]);return Object(u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(u.jsx)("h1",{className:"is-size-2 is-size-4-mobile",children:t})})};function b(e){return Object(l.a)(e),Object(n.useEffect)((function(){document.addEventListener("DOMContentLoaded",(function(){Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0).forEach((function(e){e.addEventListener("click",(function(){var t=e.dataset.target,a=document.getElementById(t);e.classList.toggle("is-active"),null===a||void 0===a||a.classList.toggle("is-active")}))}))}))}),[]),Object(u.jsxs)("nav",{className:"navbar",role:"navigation","aria-label":"main navigation",children:[Object(u.jsxs)("div",{className:"navbar-brand",children:[Object(u.jsx)(o.b,{className:"navbar-item",to:"/",children:Object(u.jsx)("span",{className:"is-size-4 has-text-primary",children:"kim0xSugar"})}),Object(u.jsxs)("a",{role:"button",className:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",children:[Object(u.jsx)("span",{"aria-hidden":"true"}),Object(u.jsx)("span",{"aria-hidden":"true"}),Object(u.jsx)("span",{"aria-hidden":"true"})]})]}),Object(u.jsx)("div",{id:"navbarBasicExample",className:"navbar-menu",children:Object(u.jsxs)("div",{className:"navbar-start",children:[Object(u.jsx)(o.b,{to:"/kokoa-status",className:"navbar-item",children:"Kokoa Status"}),Object(u.jsx)(o.b,{to:"/klayswap-position",className:"navbar-item",children:"Klayswap Position"})]})})]})}var m=a(13),j=a(12),f=a(33),x=a(21),h=a(40),v=(a(234),a(235),a(236)),y=a(237),O=a(238),g=a(156),k=a.n(g),T=["https://klaytn01.fandom.finance/","https://klaytn02.fandom.finance/","https://klaytn03.fandom.finance/","https://klaytn04.fandom.finance/","https://klaytn05.fandom.finance/"],S=function(){return new k.a(T[Math.floor(Math.random()*T.length)])},D=function(){return new(S().klay.Contract)(v,"0xaB50c50DC18c2e133a0060e03A516064c838B136")},L=function(){return new(S().klay.Contract)(y,"0x831AD054e6EdBF1a3f33bDeE8ddfca7cfc64e82A")},w=function(e){return new(S().klay.Contract)(O,e)},C=function(){var e=Object(f.a)(Object(j.a)().mark((function e(t,a){var n,r,s,c,i;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=L(),!(a.length<101)){e.next=7;break}return e.next=4,n.methods.getUserDataList(t,a).call();case 4:return e.abrupt("return",e.sent);case 7:for(r=Math.floor(a.length/100),s=[],c=0;c<r+1;c++)s.push(n.methods.getUserDataList(t,a.slice(100*c,100*(c+1))).call());return e.next=12,Promise.all(s);case 12:return i=e.sent,e.abrupt("return",i.flat());case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),P=function(){var e=Object(f.a)(Object(j.a)().mark((function e(t){var a,n,r,s,c,i;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=D(),!((n=t["Vault Length"])<101)){e.next=8;break}return e.next=5,a.methods.getVaultInfoList(t.collateralType,0,n).call();case 5:return e.abrupt("return",e.sent);case 8:for(r=[],s=Math.floor(n/100),c=0;c<s;c++)r.push(a.methods.getVaultInfoList(t.collateralType,100*c,c<s?100*(c+1):n).call());return e.next=13,Promise.all(r);case 13:return i=e.sent,e.abrupt("return",i.flat());case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=a(32),N=function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null},A=function(){var e=Object(f.a)(Object(j.a)().mark((function e(t,a,n,r){var s;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPastEvents(a,{fromBlock:n,toBlock:r});case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),I=function(){var e=Object(f.a)(Object(j.a)().mark((function e(t){var a,n,r,s,c,i,o;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=w(t),n=104365981,(r=N(t))&&(n=r.blockNumber),e.next=6,A(a,"CreateUser",n,"latest");case 6:return s=e.sent,c=r?[].concat(Object(K.a)(r.users),Object(K.a)(s.map((function(e){var t;return null===(t=e.returnValues)||void 0===t?void 0:t.user})))):s.map((function(e){var t;return null===(t=e.returnValues)||void 0===t?void 0:t.user})),i=s[s.length-1].blockNumber,o=Array.from(new Set(c)),l=t,u={blockNumber:i,users:o},localStorage.setItem(l,JSON.stringify(u)),e.abrupt("return",o);case 12:case"end":return e.stop()}var l,u}),e)})));return function(t){return e.apply(this,arguments)}}(),F=r.a.createContext(null),E=function(){var e=r.a.useContext(F);if(!e)throw new Error("usePositionPool must be used within a PositionPoolContextProvider");return Object(h.a)({},e.positionPoolDataProvider)},U=function(e){var t=e.children,a=Object(n.useState)(null),r=Object(x.a)(a,2),s=r[0],c=r[1],i={};Object(n.useEffect)((function(){var e=L();Object(f.a)(Object(j.a)().mark((function t(){var a,n;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.methods.getPositionPoolList().call();case 2:a=t.sent,n=a.map((function(e){return{pool:e.pool,token:e.token,symbol:e.symbol,decimals:e.decimals,maxLtv:e.maxLtv/1e18,liqudationLtv:e.liqudation/1e18,oraclePrice:e.oraclePrice/1e18}})),c(n);case 5:case"end":return t.stop()}}),t)})))()}),[]);var o=Object(n.useCallback)(function(){var e=Object(f.a)(Object(j.a)().mark((function e(t){var a,n,r;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t.pool);case 2:return a=e.sent,e.next=5,C(t.pool,a);case 5:return n=e.sent,r=n.map((function(e,n){return{pool:t.pool,user:a[n],collateralInUsd:e.collateralInUsd/1e18,borrowedInUsd:e.borrowedInUsd/1e18,swappedInUsd:e.swappedInUsd/1e18,positionAmount:e.positionAmount/Math.pow(10,t.decimals),pnl:e.pnl/1e18,roe:e.roe/100,entryPrice:e.entryPrice/1e18,liquidationPrice:e.liquidationPrice/1e18,position:Number(e.position),collateralAmount:e.collateralAmount/1e18,currentLtv:e.ltv/1e16}})).filter((function(e){return e.collateralInUsd>0})),i=Object(h.a)(Object(h.a)({},i),{},Object(m.a)({},t.pool,r)),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]),l=Object(n.useMemo)((function(){return console.log(i),{poolInfos:s,accountInfos:i,getPoolAccountInfosData:o}}),[s,Object.keys(i).length,o]);return Object(u.jsx)(F.Provider,{value:{positionPoolDataProvider:l},children:t})},B=[{collateralType:"klay",symbol:"KLAY",imgSrc:"https://app.kokoa.finance/assets/klay.73bbfc98.png",feed:"0x66519B56463fC431d6b4E6fA502d320F79804247",decimals:18,liqLtv:6e3},{collateralType:"WEMIX",symbol:"WEMIX",imgSrc:"https://app.kokoa.finance/assets/wemix.e4fd74c5.svg",feed:"0x41f43d71e624BE1DF1DFcbf81EeE53b1822adC3F",decimals:18,liqLtv:6e3},{collateralType:"KWBTC",symbol:"oWBTC",imgSrc:"https://app.kokoa.finance/assets/kwbtc.828e9196.svg",feed:"0x98CDFcf0F0b13DcAbed69a2ec09E8Cb9dC16efad",decimals:8,liqLtv:6e3},{collateralType:"KETH",symbol:"oETH",imgSrc:"https://app.kokoa.finance/assets/keth.f14b2be5.svg",feed:"0x83Ab967cA6B4b122A39c3295e649eAC74322bEc9",decimals:18,liqLtv:6e3},{collateralType:"KXRP",symbol:"oXRP",imgSrc:"https://app.kokoa.finance/assets/kxrp.28100403.svg",feed:"0xBb5cC84a7ab4afdad6Db52Ba1443b0d0E81eD1F4",decimals:6,liqLtv:6e3},{collateralType:"KSP",symbol:"KSP",imgSrc:"https://app.kokoa.finance/assets/ksp.836bb20c.svg",feed:"0xf938F3Bb6E684C370126DF74F232656da9c74B8c",decimals:18,liqLtv:6e3},{collateralType:"KORC",symbol:"oORC",imgSrc:"https://app.kokoa.finance/assets/korc.29e1d62c.svg",feed:"0x416e57e82f693C2797F90D1E7e7AF9350E2115eA",decimals:18,liqLtv:6e3},{collateralType:"KDAI",symbol:"KDAI",imgSrc:"https://app.kokoa.finance/assets/kdai.1bd3b5dc.png",feed:"0x4FF98cf6633D54d86a60F173A2fE556464Aa84bc",decimals:18,liqLtv:9e3},{collateralType:"KUSDT",symbol:"oUSDT",imgSrc:"https://app.kokoa.finance/assets/kusdt.28403356.svg",feed:"0x66C49d4738Ba08847eF8C17347da90fb54016c74",decimals:6,liqLtv:9e3},{collateralType:"KUSDC",symbol:"oUSDC",imgSrc:"https://app.kokoa.finance/assets/kusdc.14fcf4a3.png",feed:"0xf5D7DA7dFC8FE79e29d6a95c081c302FF481F3BE",decimals:6,liqLtv:9e3}],M=B.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{collateralType:"X".concat(e.collateralType.toUpperCase()),symbol:"X".concat(e.symbol)})})),q=[].concat(B,[{collateralType:"ibKDAI",symbol:"ibKDAI",imgSrc:"https://app.kokoa.finance/assets/ibkdai.e08c11c5.png",feed:"0xd4c3F2d57E4BeB4D6E9b887Ff9f98420A9de3d0e",decimals:18,liqLtv:9e3},{collateralType:"ibKUSDT",symbol:"iboUSDT",imgSrc:"https://app.kokoa.finance/assets/ibkusdt.27b626af.png",feed:"0x943E9b3aa97fC15C7C78d9C1D9b936f03Ba5DdD4",decimals:6,liqLtv:9e3}],[{collateralType:"KSLPKUSDTKDAI",symbol:"oUSDT-KDAI",imgSrc:"",feed:"0x5AEbAE55fdccc757a8FB445f41018b01Dc6b379C",decimals:6,liqLtv:9e3},{collateralType:"KSLPKUSDTKUSDC",symbol:"oUSDT-oUSDC",imgSrc:"",feed:"0x7E0f2EEC57c877445254ce432F2D8f2ef1184A18",decimals:6,liqLtv:9e3},{collateralType:"KSLPKLAYKDAI",symbol:"KLAY-KDAI",imgSrc:"",feed:"0xD551C6A4a3C1733502400fc05D3c2C665299FbCc",decimals:18,liqLtv:7500},{collateralType:"KSLPKETHKUSDT",symbol:"oETH-oUSDT",imgSrc:"",feed:"0xf6902c9CC3724B85A05e8921637abd917D314c0f",decimals:18,liqLtv:7500},{collateralType:"KSLPKXRPKDAI",symbol:"oXRP-KDAI",imgSrc:"",feed:"0xb518b47F7ca9348Ba4Ee19f6F76C203245347C44",decimals:6,liqLtv:7500},{collateralType:"KSLPKSPKUSDT",symbol:"KSP-oUSDT",imgSrc:"",feed:"0x25271D99Ad1857dE140c119ba996377A4a2382e1",decimals:18,liqLtv:7500},{collateralType:"KSLPKORCKDAI",symbol:"oORC-KDAI",imgSrc:"",feed:"0x8b40B3F02c6Ba92D69d8CF65e56f3dD12cF72674",decimals:18,liqLtv:7500}],Object(K.a)(M)),V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:t})},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.toLocaleString("en-US",{maximumFractionDigits:t})},W=function(){var e=Object(f.a)(Object(j.a)().mark((function e(){var t,a,n,r;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,a={},e.prev=2,e.next=5,fetch("https://prod.kokoa-api.com/vaults/borrow").then((function(e){return e.json()}));case 5:return n=e.sent,e.next=8,fetch("https://prod.kokoa-api.com/vaults/lever-easy").then((function(e){return e.json()}));case 8:return r=e.sent,n.vaults.concat(r.vaults).forEach((function(e){var n;a[(n=e.collateralType,k.a.utils.hexToUtf8(n))]=Number(e.totalBorrowedAmount)*Math.abs(Number(e.stabilityFeeApr))/36500,t+=Number(e.totalBorrowedAmount)*Math.abs(Number(e.stabilityFeeApr))/36500})),e.abrupt("return",{totalInterestKsd:t,interestKsd:a});case 14:return e.prev=14,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",{totalInterestKsd:t,interestKsd:a});case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),H=r.a.createContext(null),X=function(){var e=r.a.useContext(H);if(!e)throw new Error("useWeb3Context must be used within a Web3ContextProvider");return Object(h.a)({},e.dataProvider)},J=function(e){var t=e.children,a=Object(n.useState)([]),r=Object(x.a)(a,2),s=r[0],c=r[1],i=Object(n.useState)(null),o=Object(x.a)(i,2),l=o[0],d=(o[1],Object(n.useState)({})),p=Object(x.a)(d,2),b=p[0],v=p[1];Object(n.useEffect)((function(){var e=D();Object(f.a)(Object(j.a)().mark((function t(){var a,n,r,s;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W();case 2:return a=t.sent,n=q,t.next=6,e.methods.getCollateralInfos(q.map((function(e){return e.collateralType})),q.map((function(e){return e.feed}))).call();case 6:r=t.sent,s=n.map((function(e,t){var n=r.rates[t]/1e27,s=r.totalLockCollaterals[t]/Math.pow(10,e.decimals),c=r.totalLoans[t]*n/Math.pow(10,18),i=r.oraclePrices[t]/Math.pow(10,36-e.decimals),o=Number(r.vaultLengths[t]),l=(c/(s*i)*100).toFixed(2);return Object(h.a)(Object(h.a)({},e),{},{"Total Locked Collaterals":s,"Total Borrowed KSD":c,"Oracle Price":i,"Average LTV":l+" %","Vault Length":o,"Daily KSD Interest":a.interestKsd[e.collateralType],rate:n})})),c(s);case 9:case"end":return t.stop()}}),t)})))()}),[]);var y=function(){var e=Object(f.a)(Object(j.a)().mark((function e(t){var a,n,r,s,c,i,o,l,u,d,p,b;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:if(a=e.sent,n=t["Vault Length"],r=Number(t["Oracle Price"]),s=t.decimals,c=t.rate,i=[],Array.isArray(a))a.forEach((function(e){e.totalLockCollaterals.forEach((function(t,a){var n=t/Math.pow(10,s),o=e.totalLoans[a]*c/Math.pow(10,18),l=o/(n*r)*100;i.push({lockedCollateral:n,borrowedKSD:o,index:e.indexes[a],address:e.accounts[a],ltv:isNaN(l)?"0.00 %":l.toFixed(2)+" %"})}))}));else for(o=0;o<n;o++)l=a.totalLockCollaterals[o]/Math.pow(10,s),u=a.totalLoans[o]*c/Math.pow(10,18),d=u/(l*r)*100,i.push({lockedCollateral:l,borrowedKSD:u,index:a.indexes[o],address:a.accounts[o],ltv:isNaN(d)?"0.00 %":d.toFixed(2)+" %"});return p=i.length,b=i.filter((function(e){return e.borrowedKSD>0})).length,v((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(m.a)({},t.collateralType,{cumulativeLength:p,activeLength:b}))})),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(n.useMemo)((function(){return{collateralInfos:s,vaultList:l,getVaultAccountList:y,vaultLengthStat:b}}),[s,l,y,b]);return Object(u.jsx)(H.Provider,{value:{dataProvider:O},children:t})},z=function(e){return Object(u.jsx)("div",{className:"level-item has-text-centered",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{className:"heading",children:e.heading}),Object(u.jsx)("p",{className:"title",children:e.title})]})})};function Y(e){var t=e.onChange,a=e.value,n=e.style;return Object(u.jsx)("input",{style:n,onChange:t,value:a,className:"input block",type:"text",placeholder:"Search Address"})}function _(e){e.defaultKey;var t=e.setKey,a=e.options;return Object(u.jsx)("div",{className:"select block",children:Object(u.jsx)("select",{onChange:function(e){t(e.currentTarget.value)},children:a.map((function(e,t){return Object(u.jsx)("option",{value:e,children:e})}))})})}var $={"0x348acec176d0457ecb3b596ff9d9d9c089cafdf1":"WEMADE"},G=function(e){return e.toLowerCase()in $?$[e.toLowerCase()]+" ( ".concat(Q(e)," )"):e},Q=function(e){return e.slice(0,6)+"..."+e.slice(-4)},Z=function(e,t){return!!t.toLowerCase().match(e.toLowerCase())},ee=function(e){var t=E().getPoolAccountInfosData,a=Object(n.useState)(null),r=Object(x.a)(a,2),s=r[0],c=r[1];Object(n.useEffect)((function(){Object(f.a)(Object(j.a)().mark((function a(){return Object(j.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=c,a.next=3,t(e.poolData);case 3:a.t1=a.sent,(0,a.t0)(a.t1);case 5:case"end":return a.stop()}}),a)})))()}),[]);var i=Object(n.useMemo)((function(){return null===s||void 0===s?void 0:s.sort((function(t,a){var n=e.sortKey;return"\uaddc\ubaa8\uc21c"===n?Math.abs(a.positionAmount)-Math.abs(t.positionAmount):"\uc218\uc775\ub960\uc21c"===n?a.roe-t.roe:"PnL\uc21c"===n?a.pnl-t.pnl:"LTV\uc21c"===n?a.currentLtv-t.currentLtv:0})).filter((function(t){return!e.searchAddr||Z(e.searchAddr,t.user)}))}),[s,e.searchAddr,e.sortKey]);return i?Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(ae,{children:[Object(u.jsx)(ne,{tableHeader:e.tableHeader}),Object(u.jsx)("tbody",{children:i.map((function(e,t){return Object(u.jsx)(se,{data:e})}))})]})}):Object(u.jsx)("progress",{className:"progress is-large is-info",max:"100",children:"60%"})},te=function(e){var t=X().getVaultAccountList,a=Object(n.useState)(null),r=Object(x.a)(a,2),s=r[0],c=r[1];Object(n.useEffect)((function(){Object(f.a)(Object(j.a)().mark((function a(){return Object(j.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=c,a.next=3,t(e.collateralInfo);case 3:a.t1=a.sent,(0,a.t0)(a.t1);case 5:case"end":return a.stop()}}),a)})))()}),[]);var i=Object(n.useMemo)((function(){return null===s||void 0===s?void 0:s.sort((function(e,t){return Number(t.borrowedKSD)-Number(e.borrowedKSD)})).filter((function(t){return e.searchAddr?Z(e.searchAddr,t.address):t.borrowedKSD>0}))}),[s]),o=Object(n.useState)(!1),l=Object(x.a)(o,2),d=l[0],p=l[1];return i?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(ae,{children:[Object(u.jsx)(ne,{tableHeader:e.tableHeader,hideIndex:!0}),Object(u.jsx)("tbody",{children:null===i||void 0===i?void 0:i.map((function(t,a){return!d&&a>10?null:Object(u.jsx)(re,{liqLtv:e.collateralInfo.liqLtv,index:t.index,lockedCollateral:t.lockedCollateral,borrowedKSD:t.borrowedKSD,ltv:t.ltv,address:t.address,oraclePrice:e.collateralInfo["Oracle Price"]})}))})]}),i.length>10&&Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:"is-flex is-justify-content-center",onClick:function(){return p((function(e){return!e}))},children:[Object(u.jsx)("div",{className:"mx-3",style:{rotate:d?"180deg":"0deg"},children:Object(u.jsx)("i",{className:"fas fa-angle-double-down"})}),Object(u.jsxs)("div",{children:[d?"Close":"See More"," "]})]})})]}):Object(u.jsx)("progress",{className:"progress is-large is-info",max:"100",children:"60%"})},ae=function(e){return Object(u.jsx)("div",{className:"table-container",children:Object(u.jsx)("table",{className:"table is-fullwidth is-hoverable",children:e.children})})},ne=function(e){var t=e.tableHeader,a=e.hideIndex;return Object(u.jsx)("thead",{children:Object(u.jsx)("tr",{children:t&&t.map((function(e,t){return 0===t&&a?Object(u.jsx)("th",{className:"is-hidden-mobile",children:e}):Object(u.jsx)("th",{children:e})}))})})},re=function(e){var t=e.index,a=e.address,n=e.lockedCollateral,r=e.borrowedKSD,s=e.ltv,c=e.oraclePrice,i=e.liqLtv;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{className:"is-hidden-mobile",children:t}),Object(u.jsx)("td",{children:Object(u.jsxs)("a",{href:"https://scope.klaytn.com/account/".concat(a),style:{textDecoration:"none !important"},target:"_blank",children:[Object(u.jsx)("span",{className:"is-hidden-mobile",children:G(a)}),Object(u.jsx)("span",{className:"is-hidden-tablet",children:Q(a)})]})}),Object(u.jsxs)("td",{style:{minWidth:"20%"},children:[n.toLocaleString("en-US",{maximumFractionDigits:c>1e3?4:0})," ",Object(u.jsx)("div",{className:"is-size-6",style:{color:"hsl(171, 100%, 41%)"},children:"($ ".concat((n*c).toLocaleString("en-US",{maximumFractionDigits:0}),"\n          )")})]}),Object(u.jsx)("td",{children:r.toLocaleString("en-US",{maximumFractionDigits:0})}),Object(u.jsx)("td",{children:s}),Object(u.jsx)("td",{children:V(1e4*r/i/n,4)})]})},se=function(e){var t=e.data;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("a",{href:"https://scope.klaytn.com/account/".concat(t.user),style:{textDecoration:"none !important"},target:"_blank",children:Object(u.jsx)("span",{children:Q(t.user)})})}),Object(u.jsx)("th",{className:1===t.position?"has-text-success":"has-text-danger",children:1===t.position?"Long":"Short"}),Object(u.jsx)("td",{children:R(t.positionAmount,4)}),Object(u.jsx)("td",{children:"".concat(V(t.collateralInUsd))}),Object(u.jsx)("td",{className:"has-text-right",children:t.roe.toFixed(2)+"%"}),Object(u.jsx)("td",{className:"has-text-right",children:V(t.pnl)}),Object(u.jsx)("td",{className:"has-text-right",children:t.currentLtv.toFixed(2)+"%"}),Object(u.jsx)("td",{className:"has-text-right",children:V(t.entryPrice,4)}),Object(u.jsx)("td",{className:"has-text-right",children:V(t.liquidationPrice,4)})]})},ce=function(e){switch(e){case"KLAY":return"https://app.kokoa.finance/assets/klay.73bbfc98.png";case"WEMIX":return"https://app.kokoa.finance/assets/wemix.e4fd74c5.svg";case"oWBTC":return"https://app.kokoa.finance/assets/kwbtc.828e9196.svg";case"oETH":return"https://app.kokoa.finance/assets/keth.f14b2be5.svg";case"oXRP":return"https://app.kokoa.finance/assets/kxrp.28100403.svg";case"KSP":return"https://app.kokoa.finance/assets/ksp.836bb20c.svg";case"oORC":return"https://app.kokoa.finance/assets/korc.29e1d62c.svg";case"KDAI":return"https://app.kokoa.finance/assets/kdai.1bd3b5dc.png";case"oUSDT":return"https://app.kokoa.finance/assets/kusdt.28403356.svg";case"oUSDC":return"https://app.kokoa.finance/assets/kusdc.14fcf4a3.png";case"ibKDAI":return"https://app.kokoa.finance/assets/ibkdai.e08c11c5.png";case"iboUSDT":return"https://app.kokoa.finance/assets/ibkusdt.27b626af.png";case"MBX":return"https://s.klayswap.com/data/img/token/0xd068c52d81f4409b9502da926ace3301cc41f623.svg";case"ORC":return"https://s.klayswap.com/data/img/token/0xfe41102f325deaa9f303fdd9484eb5911a7ba557.svg";case"BORA":return"https://s.klayswap.com/data/img/token/0x02cbe46fb8a1f579254a9b485788f2d86cad51aa.png";default:return""}};var ie=function(){var e=E(),t=e.poolInfos,a=e.accountInfos,s=r.a.useState(""),c=Object(x.a)(s,2),i=c[0],o=c[1],l=r.a.useState("all"),d=Object(x.a)(l,2),p=(d[0],d[1],Object(n.useState)("\uaddc\ubaa8\uc21c")),b=Object(x.a)(p,2),m=b[0],j=b[1];return console.log(m),Object(u.jsxs)("div",{className:"p-4 my-4",children:[Object(u.jsxs)("div",{className:"box  m-2",children:[Object(u.jsx)("div",{className:"subtitle",children:"\ud074\ub808\uc774\uc2a4\uc651 \ud3ec\uc9c0\uc158 \ud480 \ubaa8\ub2c8\ud130\ub9c1"}),Object(u.jsx)("p",{children:"1. \ud3ec\uc9c0\uc158 \uc885\ub8cc \uc2dc \ubc1b\uc744 \uc218 \uc788\ub294 \uc2e4\uc81c \uae08\uc561 ROE, PnL \ud45c\uae30"}),Object(u.jsx)("p",{className:"has-text-danger",children:"** \ucc38\uace0\ub9cc \ud558\uc138\uc694 \ub370\uc774\ud130\uac00 \uc815\ud655\ud558\uc9c0 \uc54a\uc744 \uc218 \uc788\uc74c **"})]}),Object(u.jsxs)("div",{className:"my-4 px-4 is-flex is-justify-content-space-between is-align-content-center is-flex-wrap-wrap",children:[Object(u.jsx)(Y,{style:{maxWidth:"480px"},onChange:function(e){return o(e.target.value)},value:i}),Object(u.jsx)(_,{defaultKey:"\uaddc\ubaa8\uc21c",options:["\uaddc\ubaa8\uc21c","\uc218\uc775\ub960\uc21c","PnL\uc21c","LTV\uc21c"],setKey:j})]}),t&&t.map((function(e){var t;return Object(u.jsxs)("div",{className:"box m-2",children:[Object(u.jsxs)("div",{className:"block is-flex is-align-items-center ",style:{gap:"12px"},children:[Object(u.jsx)("figure",{className:"image is-48x48",children:Object(u.jsx)("img",{className:"is-rounded",src:ce(e.symbol)})}),Object(u.jsx)("h2",{className:"subtitle",children:e.symbol})]}),Object(u.jsxs)("nav",{className:"level",children:[Object(u.jsx)(z,{heading:"Oracle Price",title:V(e.oraclePrice,4)}),Object(u.jsx)(z,{heading:"Liqudation LTV",title:(100*e.liqudationLtv).toString()+"%"})]}),Object(u.jsx)(ee,{searchAddr:i,tableHeader:["\uc8fc\uc18c","\ud3ec\uc9c0\uc158","\uaddc\ubaa8","\ud22c\uc785\uae08","\uc218\uc775\ub960","PnL","LTV","\uc9c4\uc785\uac00","\uccad\uc0b0\uac00"],tableData:null!==(t=null===a||void 0===a?void 0:a[e.pool])&&void 0!==t?t:null,poolData:e,sortKey:m})]})}))]})};var oe=function(){var e=X(),t=e.collateralInfos,a=e.vaultLengthStat,s=r.a.useState(""),c=Object(x.a)(s,2),i=c[0],o=c[1],l=r.a.useState("all"),d=Object(x.a)(l,2),p=(d[0],d[1],Object(n.useMemo)((function(){var e=0,a=0,n=0;return t.forEach((function(t){e+=t["Total Locked Collaterals"]*t["Oracle Price"],a+=t["Total Borrowed KSD"],n+=t["Daily KSD Interest"]})),{totalLockCollateralsInUSD:0|e,totalBorrowedKSD:0|a,totalInterestKSD:0|n}}),[t]));return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"box m-2",children:Object(u.jsxs)("nav",{className:"level",children:[Object(u.jsx)(z,{heading:"Total Collaterals In USD",title:V(p.totalLockCollateralsInUSD)}),Object(u.jsx)(z,{heading:"Total Borrowed KSD",title:V(p.totalBorrowedKSD)}),Object(u.jsx)(z,{heading:"Daily KSD Interest Accrual",title:V(p.totalInterestKSD)})]})}),Object(u.jsx)("div",{className:"px-4 is-flex is-justify-content-end",children:Object(u.jsx)(Y,{style:{maxWidth:"480px"},onChange:function(e){return o(e.target.value)},value:i})}),t.length>0&&t.map((function(e){var t,n,r,s,c,o,l,d,p,b;return Object(u.jsxs)("div",{className:"box m-2",children:[Object(u.jsxs)("div",{className:"block is-flex is-align-items-center ",style:{gap:"12px"},children:[e.imgSrc?Object(u.jsx)("figure",{className:"image is-48x48",children:Object(u.jsx)("img",{className:"is-rounded",src:e.imgSrc})}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("figure",{className:"image is-48x48",children:Object(u.jsx)("img",{className:"is-rounded",src:ce(e.symbol.split("-")[0])})})," ",Object(u.jsx)("figure",{className:"image is-48x48",style:{marginLeft:"-18px"},children:Object(u.jsx)("img",{className:"is-rounded",src:ce(e.symbol.split("-")[1])})})]}),Object(u.jsx)("h2",{className:"subtitle",children:e.symbol})]}),Object(u.jsxs)("nav",{className:"level",children:[Object(u.jsx)(z,{heading:"Total Locked Collaterals",title:null===(t=e["Total Locked Collaterals"])||void 0===t?void 0:t.toLocaleString("en-US",{maximumFractionDigits:e["Oracle Price"]>1e3?4:0})}),Object(u.jsx)(z,{heading:"Total Borrowed KSD",title:null===(n=e["Total Borrowed KSD"])||void 0===n?void 0:n.toLocaleString("en-US",{maximumFractionDigits:0})}),Object(u.jsx)(z,{heading:"Oracle Price",title:null===(r=e["Oracle Price"])||void 0===r?void 0:r.toLocaleString("en-US",{maximumFractionDigits:4})}),Object(u.jsx)(z,{heading:"Average LTV",title:e["Average LTV"]})]}),Object(u.jsxs)("nav",{className:"level is-mobile",children:[Object(u.jsx)(z,{heading:"Cumulative Users",title:null!==(s=null===(c=a[e.collateralType])||void 0===c||null===(o=c.cumulativeLength)||void 0===o?void 0:o.toString())&&void 0!==s?s:"0"}),Object(u.jsx)(z,{heading:"Active Users",title:null!==(l=null===(d=a[e.collateralType])||void 0===d||null===(p=d.activeLength)||void 0===p?void 0:p.toString())&&void 0!==l?l:"0"}),Object(u.jsx)(z,{heading:"Daily KSD Interest",title:null===(b=e["Daily KSD Interest"])||void 0===b?void 0:b.toLocaleString("en-US",{maximumFractionDigits:0,style:"currency",currency:"USD"})})]}),Object(u.jsx)(te,{searchAddr:i,collateralInfo:e,tableHeader:["Index","Address","Collateral","Borrowed KSD","LTV","Liq. Price"]})]})}))]})},le=a(877);function ue(e){return Object(l.a)(e),Object(u.jsx)("div",{className:"block  m-6",children:Object(u.jsx)(le.a,{children:"\n\n## \n\n1. [\ucf54\ucf54\uc544 \ud30c\uc774\ub0b8\uc2a4 \ub2f4\ubcf4\ubb3c & KSD \ubaa8\ub2c8\ud130\ub9c1](https://kim0xsugar.github.io/kokoa-status)\n- \ub2f4\ubcf4\ubb3c \ubcc4 KSD \ubc1c\ud589\ub7c9, CDP \uc5f0 \uc720\uc800\uc758 \uc218\n- \uc720\uc800 \ubcc4 CDP \ubaa8\ub2c8\ud130\ub9c1  \n\n &nbsp; \n\n &nbsp;   \n\n\n\n  \n2. [\ud074\ub808\uc774\uc2a4\uc651 \ud3ec\uc9c0\uc158 \ud480 \ubaa8\ub2c8\ud130\ub9c1](https://kim0xsugar.github.io/klayswap-position)\n- \uc720\uc800 \ubcc4 \ud3ec\uc9c0\uc158 \uc870\ud68c \n- \uccad\uc0b0\uac00 \ud655\uc778\n"})})}var de=function(){return Object(u.jsx)(o.a,{basename:"",children:Object(u.jsxs)("div",{children:[Object(u.jsx)(b,{}),Object(u.jsxs)("div",{style:{margin:"0 auto",maxWidth:"1024px"},children:[Object(u.jsx)(p,{}),Object(u.jsxs)(i.c,{children:[Object(u.jsx)(i.a,{path:"kokoa-status",element:Object(u.jsx)(J,{children:Object(u.jsx)(oe,{})})}),Object(u.jsx)(i.a,{path:"/klayswap-position",element:Object(u.jsx)(U,{children:Object(u.jsx)(ie,{})})}),Object(u.jsx)(i.a,{path:"/",element:Object(u.jsx)(ue,{})})]})]}),Object(u.jsx)(d,{})]})})},pe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,878)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};a(868);c.a.createRoot(document.getElementById("root")).render(Object(u.jsx)(de,{})),pe()}},[[869,1,2]]]);